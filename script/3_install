#! /bin/sh
[ "$(whoami)" != "root" ] && exec sudo -- "$0" "$@"

if [ "`uname`" = "Linux" ]; then
  apt-get -q -y install vim zsh  \
  	python-pip python-virtualenv \
  	libfreetype6-dev libncurses5-dev git \
  	ack-grep autojump tree colordiff grc htop tmux \
	unison

  echo "Setting default java: 1.8"
  echo oracle-java7-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections
  apt-get -q -y install oracle-java8-installer
  update-java-alternatives -s java-8-oracle

  # Leiningen Clojure
  cd /usr/bin && wget https://raw.github.com/technomancy/leiningen/stable/bin/lein && chmod a+x lein;

  # Services
  apt-get -q -y install sysvinit-utils ufw

  pip3 install tmuxp ipython jupyter matplotlib

elif [ "`uname`" = 'Darwin' ]; then
  pip3 install tmuxp ipython jupyter matplotlib
  brew install reattach-to-user-namespace unison
fi
